define("src/main/customScroll/customScroll.rt.js",["react/addons","lodash"],function(e,t){return function(){return e.createElement("div",{className:"custom-scroll",style:{height:this.props.heightRelativetoParent}},e.createElement("div",{className:"outer-container",style:this.getOuterContainerStyle()},this.hasScroll?e.createElement("div",{className:"custom-scrollbar "+(this.state.onDrag?"handleDrag":""),onClick:this.onCustomScrollClick,key:"scrollbar"},e.createElement("div",{ref:"scrollHandle",className:"custom-scroll-handle",style:this.getScrollHandleStyle(),onMouseDown:this.onHandleMouseDown},e.createElement("div",{className:"inner-handle"}))):null,e.createElement("div",{ref:"innerContainer",className:t.keys(t.pick({"inner-container":!0,"content-scrolled":this.state.scrollPos&&this.props.addScrolledClass},t.identity)).join(" "),style:this.getScrollStyles().innerContainer,onScroll:this.onScroll,onWheel:this.blockOuterScroll},e.createElement("div",{className:"content-wrapper",ref:"contentWrapper",style:this.getScrollStyles().contentWrapper},"\n                ",this.props.children,"\n            "))))}}),define("src/main/customScroll/customScroll.js",["react","react-dom","lodash","jquery","./customScroll.rt"],function(e,t,n,r,i){function s(e,t,r){t=n.isUndefined(t)?e:t,r=n.isUndefined(r)?e:r;if(t>r)throw"min limit is greater than max limit";return e<t?t:e>r?r:e}return e.createClass({displayName:"customScroll",propTypes:{allowOuterScroll:e.PropTypes.bool,heightRelativetoParent:e.PropTypes.string,onScroll:e.PropTypes.func,addScrolledClass:e.PropTypes.bool,freezePosition:e.PropTypes.bool,handleClass:e.PropTypes.string},getDefaultProps:function(){return{handleClass:"inner-handle"}},getInitialState:function(){return this.scrollbarYWidth=0,{scrollPos:0,onDrag:!1}},componentDidMount:function(){this.forceUpdate()},componentDidUpdate:function(e){var n=t.findDOMNode(this),i=n.getBoundingClientRect(),s=this.getScrolledElement(),o=s.scrollHeight;this.scrollbarYWidth=s.offsetWidth-s.clientWidth,this.visibleHeight=s.clientHeight,this.scrollRatio=o?this.visibleHeight/o:1,this.toggleScrollIfNeeded(o),this.position={top:i.top+r(window).scrollTop(),left:i.left+r(window).scrollLeft()},this.freezePosition(e)},componentWillUnmount:function(){r(document).off("mousemove",this.onHandleDrag),r(document).off("mouseup",this.onHandleDragEnd)},freezePosition:function(e){var t=this.getScrolledElement(),n=this.refs.contentWrapper;this.props.freezePosition&&(n.scrollTop=this.state.scrollPos),e.freezePosition&&(t.scrollTop=this.state.scrollPos)},toggleScrollIfNeeded:function(e){var t=e-this.visibleHeight>1;this.hasScroll!==t&&(this.hasScroll=t,this.forceUpdate())},getScrollTop:function(){return this.getScrolledElement().scrollTop},updateScrollPosition:function(e){var t=this.getScrolledElement();t.scrollTop=e,this.setState({scrollPos:e})},onCustomScrollClick:function(e){if(this.isClickOnScrollHandle(e))return;var t=this.calculateNewScrollHandleTop(e),n=this.getScrollValueFromHandlePosition(t);this.updateScrollPosition(n)},isClickOnScrollHandle:function(e){var n=t.findDOMNode(this.refs.scrollHandle);return e.target===n||e.target.parentElement===n},calculateNewScrollHandleTop:function(e){var t=e.pageY-this.position.top,n=this.getScrollHandleStyle().top,r,i=t>n+this.scrollHandleHeight;return i?r=n+Math.min(this.scrollHandleHeight,this.visibleHeight-this.scrollHandleHeight):r=n-Math.max(this.scrollHandleHeight,0),r},getScrollValueFromHandlePosition:function(e){return e/this.scrollRatio},getScrollHandleStyle:function(){var e=this.state.scrollPos*this.scrollRatio;return this.scrollHandleHeight=this.visibleHeight*this.scrollRatio,{height:this.scrollHandleHeight,top:e}},adjustCustomScrollPosToContentPos:function(e){this.setState({scrollPos:e})},onScroll:function(e){if(this.props.freezePosition)return;this.adjustCustomScrollPosToContentPos(e.currentTarget.scrollTop),this.props.onScroll&&this.props.onScroll(e)},getScrolledElement:function(){return this.refs.innerContainer},onHandleMouseDown:function(e){this.startDragHandlePos=this.getScrollHandleStyle().top,this.startDragMousePos=e.pageY,this.setState({onDrag:!0}),r(document).on("mousemove",this.onHandleDrag),r(document).on("mouseup",this.onHandleDragEnd)},onHandleDrag:function(e){var t=e.pageY-this.startDragMousePos,n=s(this.startDragHandlePos+t,0,this.visibleHeight-this.scrollHandleHeight),r=this.getScrollValueFromHandlePosition(n);this.updateScrollPosition(r)},onHandleDragEnd:function(){this.setState({onDrag:!1}),r(document).off("mousemove",this.onHandleDrag),r(document).off("mouseup",this.onHandleDragEnd)},blockOuterScroll:function(e){if(this.props.allowOuterScroll)return;var t=e.currentTarget,n=e.currentTarget.scrollHeight,r=n-e.currentTarget.offsetHeight,i=e.deltaY%3?e.deltaY:e.deltaY*10;t.scrollTop+i<=0?(t.scrollTop=0,e.preventDefault()):t.scrollTop+i>=r&&(t.scrollTop=r,e.preventDefault()),e.stopPropagation()},getScrollStyles:function(){var e=this.scrollbarYWidth||20,t={marginRight:-1*e,height:this.props.heightRelativetoParent?"100%":""},n={marginRight:this.scrollbarYWidth?0:e,height:this.props.heightRelativetoParent?"100%":"",overflowY:this.props.freezePosition?"hidden":"visible"};return{innerContainer:t,contentWrapper:n}},getOuterContainerStyle:function(){return{height:this.props.heightRelativetoParent?"100%":""}},render:i})});